⁄`
KC:\Users\jolde\Desktop\TrainManagement\Data.Entities\Entities\DbPopulate.cs
	namespace 	
Data
 
. 
Domain 
. 
Entities 
{ 
public		 

class		 

DbPopulate		 
{

 

FileStream 
	xmlStream 
; 
public 

DbPopulate 
( 
) 
{ 	
} 	
public 
List 
< 
Train 
> 
	GetTrains $
($ %
)% &
{ 	
	xmlStream 
= 
new 

FileStream &
(& '
$str' 3
,3 4
FileMode5 =
.= >
Open> B
)B C
;C D
	XmlReader 
trainReader !
=" #
	XmlReader$ -
.- .
Create. 4
(4 5
	xmlStream5 >
)> ?
;? @
List 
< 
Train 
> 
trains 
=  
new! $
List% )
<) *
Train* /
>/ 0
(0 1
)1 2
;2 3
while 
( 
trainReader 
. 
ReadToFollowing .
(. /
$str/ 5
)5 6
)6 7
{ 
Train 
currentTrain "
=# $
new% (
Train) .
(. /
)/ 0
;0 1
trainReader 
. 
MoveToAttribute +
(+ ,
$str, ;
); <
;< =
currentTrain 
. 
Category %
=& '
trainReader( 3
.3 4
Value4 9
;9 :
trainReader 
. 
MoveToAttribute +
(+ ,
$str, 3
)3 4
;4 5
currentTrain 
. 
CumulatedKm (
=) *
(+ ,
int, /
)/ 0
float0 5
.5 6
Parse6 ;
(; <
trainReader< G
.G H
ValueH M
)M N
;N O
trainReader   
.   
MoveToAttribute   +
(  + ,
$str  , 3
)  3 4
;  4 5
currentTrain!! 
.!! 
OfficialNumber!! +
=!!, -
trainReader!!. 9
.!!9 :
Value!!: ?
;!!? @
trainReader## 
.## 
MoveToAttribute## +
(##+ ,
$str##, 5
)##5 6
;##6 7
currentTrain$$ 
.$$ 
Length$$ #
=$$$ %
int$$& )
.$$) *
Parse$$* /
($$/ 0
trainReader$$0 ;
.$$; <
Value$$< A
)$$A B
;$$B C
trainReader&& 
.&& 
MoveToAttribute&& +
(&&+ ,
$str&&, 6
)&&6 7
;&&7 8
currentTrain'' 
.'' 
OperatorCode'' )
=''* +
int'', /
.''/ 0
Parse''0 5
(''5 6
trainReader''6 A
.''A B
Value''B G
)''G H
;''H I
trainReader)) 
.)) 
MoveToAttribute)) +
())+ ,
$str)), 8
)))8 9
;))9 :
currentTrain** 
.** 
	OwnerCode** &
=**' (
int**) ,
.**, -
Parse**- 2
(**2 3
trainReader**3 >
.**> ?
Value**? D
)**D E
;**E F
trainReader,, 
.,, 
MoveToAttribute,, +
(,,+ ,
$str,,, 2
),,2 3
;,,3 4
currentTrain-- 
.-- 
Rank-- !
=--" #
int--$ '
.--' (
Parse--( -
(--- .
trainReader--. 9
.--9 :
Value--: ?
)--? @
;--@ A
trainReader// 
.// 
MoveToAttribute// +
(//+ ,
$str//, 3
)//3 4
;//4 5
currentTrain00 
.00 
Weight00 #
=00$ %
int00& )
.00) *
Parse00* /
(00/ 0
trainReader000 ;
.00; <
Value00< A
)00A B
;00B C
trainReader22 
.22 
MoveToContent22 )
(22) *
)22* +
;22+ ,
trainReader44 
.44 
ReadToDescendant44 ,
(44, -
$str44- 4
)444 5
;445 6
trainReader55 
.55 
ReadToDescendant55 ,
(55, -
$str55- 4
)554 5
;555 6
trainReader77 
.77 
MoveToContent77 )
(77) *
)77* +
;77+ ,
trainReader88 
.88 
ReadToDescendant88 ,
(88, -
$str88- ;
)88; <
;88< =
int99 
counter99 
=99 
$num99 
;99  
int:: 
OraS:: 
=:: 
-:: 
$num:: 
;:: 
do;; 
{<< 
	RouteNode== 
currentRouteNode== .
===/ 0
new==1 4
	RouteNode==5 >
(==> ?
)==? @
;==@ A
trainReader?? 
.??  
MoveToAttribute??  /
(??/ 0
$str??0 <
)??< =
;??= >
currentRouteNode@@ $
.@@$ %"
DestinationStationCode@@% ;
=@@< =
int@@> A
.@@A B
Parse@@B G
(@@G H
trainReader@@H S
.@@S T
Value@@T Y
)@@Y Z
;@@Z [
trainReaderBB 
.BB  
MoveToAttributeBB  /
(BB/ 0
$strBB0 ?
)BB? @
;BB@ A
currentRouteNodeCC $
.CC$ %
OriginStationCodeCC% 6
=CC7 8
intCC9 <
.CC< =
ParseCC= B
(CCB C
trainReaderCCC N
.CCN O
ValueCCO T
)CCT U
;CCU V
trainReaderEE 
.EE  
MoveToAttributeEE  /
(EE/ 0
$strEE0 B
)EEB C
;EEC D
currentRouteNodeFF $
.FF$ %"
DestinationStationNameFF% ;
=FF< =
trainReaderFF> I
.FFI J
ValueFFJ O
;FFO P
trainReaderHH 
.HH  
MoveToAttributeHH  /
(HH/ 0
$strHH0 ?
)HH? @
;HH@ A
currentRouteNodeII $
.II$ %
OriginStationNameII% 6
=II7 8
trainReaderII9 D
.IID E
ValueIIE J
;IIJ K
trainReaderKK 
.KK  
MoveToAttributeKK  /
(KK/ 0
$strKK0 6
)KK6 7
;KK7 8
currentRouteNodeLL $
.LL$ %
DepartureTimeLL% 2
=LL3 4
longLL5 9
.LL9 :
ParseLL: ?
(LL? @
trainReaderLL@ K
.LLK L
ValueLLL Q
)LLQ R
;LLR S
trainReaderNN 
.NN  
MoveToAttributeNN  /
(NN/ 0
$strNN0 6
)NN6 7
;NN7 8
currentRouteNodeOO $
.OO$ %
ArrivalTimeOO% 0
=OO1 2
OraSOO3 7
;OO7 8
OraSPP 
=PP 
intPP 
.PP 
ParsePP $
(PP$ %
trainReaderPP% 0
.PP0 1
ValuePP1 6
)PP6 7
;PP7 8
trainReaderRR 
.RR  
MoveToAttributeRR  /
(RR/ 0
$strRR0 4
)RR4 5
;RR5 6
currentRouteNodeSS $
.SS$ %
KmSS% '
=SS( )
intSS* -
.SS- .
ParseSS. 3
(SS3 4
trainReaderSS4 ?
.SS? @
ValueSS@ E
)SSE F
;SSF G
currentRouteNodeTT $
.TT$ %
OfficialCodeTT% 1
=TT2 3
counterTT4 ;
++TT; =
;TT= >
currentRouteNodeUU $
.UU$ %
TrainIdUU% ,
=UU- .
currentTrainUU/ ;
.UU; <
IdUU< >
;UU> ?
trainReaderWW 
.WW  
MoveToAttributeWW  /
(WW/ 0
$strWW0 C
)WWC D
;WWD E
currentRouteNodeXX $
.XX$ %
StandingXX% -
=XX. /
intXX0 3
.XX3 4
ParseXX4 9
(XX9 :
trainReaderXX: E
.XXE F
ValueXXF K
)XXK L
;XXL M
currentTrain[[  
.[[  !

RouteNodes[[! +
.[[+ ,
Add[[, /
([[/ 0
currentRouteNode[[0 @
)[[@ A
;[[A B
}]] 
while]] 
(]] 
trainReader]] $
.]]$ %
ReadToNextSibling]]% 6
(]]6 7
$str]]7 E
)]]E F
)]]F G
;]]G H
trains__ 
.__ 
Add__ 
(__ 
currentTrain__ '
)__' (
;__( )
}`` 
	xmlStreamaa 
.aa 
Closeaa 
(aa 
)aa 
;aa 
returnbb 
trainsbb 
;bb 
}cc 	
publicee 
Listee 
<ee 
Stationee 
>ee 
GetStationsee (
(ee( )
)ee) *
{ff 	
	xmlStreamgg 
=gg 
newgg 

FileStreamgg &
(gg& '
$strgg' 3
,gg3 4
FileModegg5 =
.gg= >
Opengg> B
)ggB C
;ggC D
	XmlReaderhh 
stationReaderhh #
=hh$ %
	XmlReaderhh& /
.hh/ 0
Createhh0 6
(hh6 7
	xmlStreamhh7 @
)hh@ A
;hhA B
Listii 
<ii 
Stationii 
>ii 
	_stationsii #
=ii$ %
newii& )
Listii* .
<ii. /
Stationii/ 6
>ii6 7
(ii7 8
)ii8 9
;ii9 :

Dictionaryjj 
<jj 
intjj 
,jj 
stringjj "
>jj" #
stationsjj$ ,
=jj- .
newjj/ 2

Dictionaryjj3 =
<jj= >
intjj> A
,jjA B
stringjjC I
>jjI J
(jjJ K
)jjK L
;jjL M
whilekk 
(kk 
stationReaderkk  
.kk  !
ReadToFollowingkk! 0
(kk0 1
$strkk1 ?
)kk? @
)kk@ A
{ll 
stationReadernn 
.nn 
MoveToAttributenn -
(nn- .
$strnn. =
)nn= >
;nn> ?
intoo 
idoo 
=oo 
intoo 
.oo 
Parseoo "
(oo" #
stationReaderoo# 0
.oo0 1
Valueoo1 6
)oo6 7
;oo7 8
stationReaderqq 
.qq 
MoveToAttributeqq -
(qq- .
$strqq. =
)qq= >
;qq> ?
stringrr 
stationNamerr "
=rr# $
stationReaderrr% 2
.rr2 3
Valuerr3 8
;rr8 9
iftt 
(tt 
!tt 
stationstt 
.tt 
ContainsKeytt )
(tt) *
idtt* ,
)tt, -
)tt- .
{uu 
stationsvv 
.vv 
Addvv  
(vv  !
idvv! #
,vv# $
stationNamevv% 0
)vv0 1
;vv1 2
}ww 
}xx 
foreachyy 
(yy 
varyy 
stationyy  
inyy! #
stationsyy$ ,
)yy, -
{zz 
Station{{ 
currentStation{{ &
={{' (
new{{) ,
Station{{- 4
{|| 
Name}} 
=}} 
station}} "
.}}" #
Value}}# (
,}}( )
OfficialCode~~  
=~~! "
station~~# *
.~~* +
Key~~+ .
} 
; 
	_stations
ÄÄ 
.
ÄÄ 
Add
ÄÄ 
(
ÄÄ 
currentStation
ÄÄ ,
)
ÄÄ, -
;
ÄÄ- .
}
ÅÅ 
	xmlStream
ÇÇ 
.
ÇÇ 
Close
ÇÇ 
(
ÇÇ 
)
ÇÇ 
;
ÇÇ 
return
ÉÉ 
	_stations
ÉÉ 
;
ÉÉ 
}
ÑÑ 	
}
ÖÖ 
}ÜÜ ‚
JC:\Users\jolde\Desktop\TrainManagement\Data.Entities\Entities\RouteNode.cs
	namespace 	
Data
 
. 
Domain 
. 
Entities 
{ 
public 

class 
	RouteNode 
{ 
public 
	RouteNode 
( 
) 
{		 	
Id

 
=

 
Guid

 
.

 
NewGuid

 
(

 
)

 
;

  
} 	
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
[ 	

ForeignKey	 
( 
$str 
) 
] 
public 
Guid 
TrainId 
{ 
get !
;! "
set# &
;& '
}( )
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
OfficialCode 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int "
DestinationStationCode )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
int 
OriginStationCode $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
string "
DestinationStationName ,
{- .
get/ 2
;2 3
set4 7
;7 8
}9 :
public 
string 
OriginStationName '
{( )
get* -
;- .
set/ 2
;2 3
}4 5
public 
int 
Km 
{ 
get 
; 
set  
;  !
}" #
public 
long 
DepartureTime !
{" #
get$ '
;' (
set) ,
;, -
}. /
public 
long 
ArrivalTime 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
Standing 
{ 
get !
;! "
set# &
;& '
}( )
} 
} ë
HC:\Users\jolde\Desktop\TrainManagement\Data.Entities\Entities\Station.cs
	namespace 	
Data
 
. 
Domain 
. 
Entities 
{ 
public 

class 
Station 
{ 
public 
Station 
( 
) 
{ 	
Id		 
=		 
Guid		 
.		 
NewGuid		 
(		 
)		 
;		  
}

 	
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
OfficialCode 
{  !
get" %
;% &
set' *
;* +
}, -
public 
static 
Station 
Create $
($ %
string% +
name, 0
,0 1
int2 5
officialCode6 B
)B C
{ 	
var 
instance 
= 
new 
Station &
{ 
Name 
= 
name 
, 
OfficialCode 
= 
officialCode +
} 
; 
return 
instance 
; 
} 	
} 
} ç
GC:\Users\jolde\Desktop\TrainManagement\Data.Entities\Entities\Ticket.cs
	namespace 	
Data
 
. 
Domain 
. 
Entities 
{ 
public 

class 
Ticket 
{ 
public 
Ticket 
( 
) 
{ 	
Id 
= 
Guid 
. 
NewGuid 
( 
) 
;  
}		 	
public

 
Guid

 
Id

 
{

 
get

 
;

 
set

 !
;

! "
}

# $
public 
Guid 
TrainId 
{ 
get !
;! "
set# &
;& '
}( )
public 
Guid 
UserId 
{ 
get  
;  !
set" %
;% &
}' (
public 
Guid 
OriginStationId #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
Guid  
DestinationStationId (
{) *
get+ .
;. /
set0 3
;3 4
}5 6
public 
DateTime 
DepartureTime %
{& '
get( +
;+ ,
set- 0
;0 1
}2 3
public 
DateTime 
ArrivalTime #
{$ %
get& )
;) *
set+ .
;. /
}0 1
public 
int 
Duration 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
Km 
{ 
get 
; 
set  
;  !
}" #
public 
string 
Type 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
Pet 
{ 
get 
; 
set !
;! "
}# $
public 
int 
Bike 
{ 
get 
; 
set "
;" #
}$ %
public 
int 
Car 
{ 
get 
; 
set !
;! "
}# $
public 
int 
Seat 
{ 
get 
; 
set "
;" #
}$ %
public 
int 
Price 
{ 
get 
; 
set  #
;# $
}% &
} 
} º
FC:\Users\jolde\Desktop\TrainManagement\Data.Entities\Entities\Train.cs
	namespace 	
Data
 
. 
Domain 
. 
Entities 
{ 
public 

class 
Train 
{ 
public 
Train 
( 
) 
{		 	
Id

 
=

 
Guid

 
.

 
NewGuid

 
(

 
)

 
;

  

RouteNodes 
= 
new 
List !
<! "
	RouteNode" +
>+ ,
(, -
)- .
;. /
} 	
public 
Guid 
Id 
{ 
get 
; 
set !
;! "
}# $
public 
string 
Category 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
CumulatedKm 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
string 
OfficialNumber $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int 
Length 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
OperatorCode 
{  !
get" %
;% &
set' *
;* +
}, -
public 
int 
	OwnerCode 
{ 
get "
;" #
set$ '
;' (
}) *
public 
int 
Rank 
{ 
get 
; 
set "
;" #
}$ %
public 
int 
Weight 
{ 
get 
;  
set! $
;$ %
}& '
public 
int 
OriginStationCode $
{% &
get' *
;* +
set, /
;/ 0
}1 2
public 
int "
DestinationStationCode )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
public 
List 
< 
	RouteNode 
> 

RouteNodes )
{* +
get, /
;/ 0
set1 4
;4 5
}6 7
} 
} —
NC:\Users\jolde\Desktop\TrainManagement\Data.Entities\Interfaces\IRepository.cs
	namespace 	
Data
 
. 
Domain 
. 

Interfaces  
{ 
public 

	interface 
IRepository  
<  !
T! "
>" #
{ 
IReadOnlyList		 
<		 
T		 
>		 
GetAll		 
(		  
)		  !
;		! "
void

 
Create

 
(

 
T

 
entity

 
)

 
;

 
void 
Delete 
( 
Guid 
entityId !
)! "
;" #
void 
Edit 
( 
T 
entity 
) 
; 
T 	
GetById
 
( 
Guid 
entityId 
)  
;  !
} 
} 